#!/usr/bin/env bash

# Create empty .env.local if it doesn't exist so direnv can watch it
[[ ! -f .env.local ]] && touch .env.local

# Load local environment variables
dotenv_if_exists .env.local

# Get device serials from IPs
if [[ -n "$SETTLER_IP" ]]; then
    export SETTLER_SERIAL=$(adb devices | grep "^$SETTLER_IP:" | awk '{print $1}')
fi

if [[ -n "$NOMAD_IP" ]]; then
    export NOMAD_SERIAL=$(adb devices | grep "^$NOMAD_IP:" | awk '{print $1}')
fi

echo "clanker environment loaded"